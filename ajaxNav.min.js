function ajaxNav(t,a){function e(t){var a=t.replace(o.url,"").replace(/\/$/,"").replace(/^\//,"");return"/"!=a&&a||(a="home"),a}var n=n||jQuery;this.url=t,this.callbacks=n.extend({preQuery:function(){n("#content").find(">*").animate({opacity:0})},putSec:function(t){n("#content").html(t)},closeSec:function(){window.history&&history.back()},ready:function(t){}},a);var o=this;this.open=function(t,a){var i,c=this;if(void 0!==a)i=a;else{if(i=n(this).attr("href"),"http"==i.substring(0,4)&&i.substring(0,o.url.length)!=o.url||"mail"==i.substring(0,4)||"tel"==i.substring(0,3)||i.indexOf("#")>=0||i.indexOf("wp-admin")>=0)return;t.preventDefault()}var r=e(i);if(e(n("body").attr("data-ajaxNav"))!=e(i)){window.history&&window.history.pushState&&e(location.href)!=r&&history.pushState({sec:r,href:i},r,i),n("body").addClass("loading"),o.callbacks.preQuery(r,c);var l=i;n.get(l,function(t){n("title").html(t.title);var a=n.parseHTML(t.contents);n("a",a).on("click",o.open),n("a.close",a).unbind("click").on("click",o.close),n("body").attr("class",t.bodyclasses).attr("data-ajaxNav",i),o.callbacks.putSec(a,r,c,i),o.callbacks.ready(r)},"jsonp").fail(function(){console.log(arguments[1]+": "+arguments[2])})}},this.ready=function(t){void 0===t&&(t=e(location.href)),o.callbacks.ready(t)},this.close=function(t){void 0!==t.preventDefault&&t.preventDefault(),o.callbacks.closeSec(e(location.href))},n(document).ready(function(){n("body").attr("data-ajaxNav",location.href)}),window.onpopstate=function(t){"#"!=location.href.slice(-1)&&o.open(t,location.href)}}